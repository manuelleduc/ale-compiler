/*
 * generated by Xtext 2.10.0
 */
package dsl.xtext.validation

import ale.xtext.ale.AlePackage
import dsl.xtext.dsl.Syntax
import org.eclipse.emf.ecore.EPackage
import org.eclipse.emf.ecore.EcorePackage
import org.eclipse.emf.ecore.resource.Resource
import org.eclipse.emf.ecore.resource.impl.ResourceSetImpl
import org.eclipse.emf.ecore.xmi.impl.XMIResourceFactoryImpl
import org.eclipse.xtext.validation.Check

/**
 * This class contains custom validation rules. 
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class DslValidator extends AbstractDslValidator {

//	public static val INVALID_NAME = 'invalidName'
//
	@Check
	def checkGreetingStartsWithCapital(Syntax syntax) {
		if (!EPackage.Registry.INSTANCE.containsKey(EcorePackage.eNS_URI))
			EPackage.Registry.INSTANCE.put(EcorePackage.eNS_URI, EcorePackage.eINSTANCE)

		Resource.Factory.Registry.INSTANCE.extensionToFactoryMap.put("ecore", new XMIResourceFactoryImpl)

		val rs = new ResourceSetImpl

		if(rs.packageRegistry.getEPackage(syntax.value) == null) {
			error(
				"Package URI can't be resolve",
				AlePackage.Literals.,
				MelangeValidationConstants.ELEMENT_NAME_EMPTY
			)
		}
	}

}
